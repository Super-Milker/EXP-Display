import{d as c,j as m,a as u,b as g,o as y,i as F,m as i,R as h,S as n,h as w,r as o,_ as P}from"./index-8ixZQw2x.js";/* empty css                                                               */const S=c({__name:"upload",props:{file:{type:String},showFileList:{type:Boolean,default:!1},customFunc:{type:Function,default:()=>{}},url:{type:String},accept:String,multiple:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},limit:{type:Number,default:999},imageType:{type:Boolean,default:!1}},setup(s,{expose:r}){const p=m("$defultRequest"),l=s,d=[".jpg",".JPG",".jpeg",".JPEG",".png",".PNG",".bmp",".BMP",".gif",".GIF",".psd",".PSD",".pcx",".PCX",".cdr",".CDR",".tiff",".TIFF",".tga",".TGA",".ufo",".UFO",".eps",".EPS",".ai",".AI",".raw",".RAW",".exif",".EXIF",".fpx",".FPX",".svg",".SVG"];u({}),u([]);const f=async e=>{if(!l.accept.includes(e.file.type)&&l.imageType!==!0)n({type:"error",message:"上传的文件类型错误，上传失败",center:!0});else if(d.includes("."+e.file.type.split("/")[1]))if(e.file.size/1024/1024>4)n({type:"error",message:"上传失败，文件大小请控制在 4M 以内",center:!0});else{let t=new FormData;t.append("file",e.file),p.request({url:l.url,method:"post",data:t}).then(a=>{l.customFunc(a)})}else{let t=new FormData;t.append("file",e.file),p.request({url:l.url,method:"post",data:t}).then(a=>{l.customFunc(a)})}};return g(()=>{}),r({}),(e,t)=>{const a=w("el-upload");return y(),F(a,{disabled:s.disabled,"show-file-list":s.showFileList,httpRequest:f,accept:s.accept,multiple:s.multiple,onClick:t[0]||(t[0]=h(()=>{},["stop"])),limit:s.limit},{trigger:i(()=>[o(e.$slots,"default",{},void 0,!0),o(e.$slots,"uploadList",{},void 0,!0)]),default:i(()=>[o(e.$slots,"file",{},void 0,!0)]),tip:i(()=>[o(e.$slots,"tip",{},void 0,!0)]),_:3},8,["disabled","show-file-list","accept","multiple","limit"])}}}),B=P(S,[["__scopeId","data-v-74d96af4"]]);export{B as default};
