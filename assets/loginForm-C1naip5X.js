import{c as q,l as R}from"./common-kvfjOh1A.js";/* empty css                                                                            *//* empty css                                                                                  *//* empty css                                                                     *//* empty css                                                                         */import U from"./commonButton-CNkRppG-.js";/* empty css                                                                   *//* empty css                                                                     *//* empty css                                                               */import"./mockApi-Bzt-_zo-.js";/* empty css                                                                                       */import{d as B,A as J,j as T,z as A,a as g,H as f,b as O,o as _,i as b,m as a,h as m,U as j,g as t,E as y,k as F,u as v,t as k,e as u,J as L,_ as z}from"./index-CH0VdndA.js";import"./commonStore-DKeEGGWD.js";/* empty css                                                                     */const E=B({__name:"loginForm",setup(G){const{cookies:w}=J(),h=T("$md5"),p=A();let n=g(!1);const e=f({username:"",password:"",memory:!1}),d=g({}),x=f({username:[{required:!0,message:"用户名不能为空",tigger:"change"},{required:!0,message:"用户名不能为空",tigger:"blur"}],password:[{required:!0,message:"密码不能为空！",tigger:"change"},{required:!0,message:"密码不能为空！",tigger:"blur"}]}),V=async()=>{var o;let s=!1;return await((o=d.value)==null?void 0:o.validate(async i=>{i?s=!0:s=!1})),s},C=()=>{p.push("/register")},I=()=>{V().then(s=>{s==!0&&(n.value=!0,R.request({url:L.loginApi.getToken,method:"post",data:e}).then(o=>{e.memory===!0?(e.password=h(e.password),localStorage.setItem("sassuserData",JSON.stringify(e))):localStorage.removeItem("sassuserData"),sessionStorage.setItem("sassuserId",JSON.stringify(o.data.userId)),w.set("sassuserToken",o.data.userToken),p.push(o.data.pageIndex),n.value=!1}).catch(()=>{n.value=!1}))})};return O(()=>{if(q(localStorage.getItem("sassuserData"))){let s=JSON.parse(localStorage.getItem("sassuserData"));e.memory=s.memory,e.username=s.username,e.password=s.password}}),(s,o)=>{const i=m("el-image"),r=m("el-form-item"),c=m("el-input"),S=m("el-checkbox"),D=m("el-form"),N=j("loading");return _(),b(D,{ref_key:"formRef",ref:d,class:"login-form","label-position":"top",model:e,rules:x},{default:a(()=>[t(r,{label:"",prop:""},{default:a(()=>[t(i,{src:"/favicon.ico",class:"login-title-image"})]),_:1}),t(r,{label:"",prop:"username"},{default:a(()=>[t(c,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=l=>e.username=l),maxlength:"50",placeholder:"用户名",class:"login-input"},null,8,["modelValue"])]),_:1}),t(r,{label:"",prop:"password"},{default:a(()=>[t(c,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.password=l),placeholder:"登录密码",class:"login-input",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t(r,{label:"",style:{"margin-bottom":"-7px !important"}},{default:a(()=>[t(S,{modelValue:e.memory,"onUpdate:modelValue":o[2]||(o[2]=l=>e.memory=l)},{default:a(()=>[y("记住账号")]),_:1},8,["modelValue"])]),_:1}),t(r,{label:""},{default:a(()=>[F((_(),b(v(U),{type:"confirm",onCommonClick:I,class:"login-form-submit",style:{"margin-top":"25px"}},{default:a(()=>[y(k("登录"))]),_:1})),[[N,v(n)]])]),_:1}),t(r,{label:"",prop:""},{default:a(()=>[u("div",{class:"login-form-fotter"},[u("div",{class:"login-form-fotter-textGroup"},[u("span",{style:{color:"rgba(0, 82, 217, 1)",cursor:"pointer"},onClick:C},k("注册"))])])]),_:1})]),_:1},8,["model","rules"])}}}),ae=z(E,[["__scopeId","data-v-dce78611"]]);export{ae as default};
