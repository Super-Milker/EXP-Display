/* empty css                                                                            *//* empty css                                                                                  *//* empty css                                                                     *//* empty css                                                                         */import"./mockApi-C9BonYRq.js";import{c as r}from"./common-BTvJicJu.js";/* empty css                                                                     *//* empty css                                                                   */import ee from"./commonDialog-TuDaaz93.js";/* empty css                                                               *//* empty css                                                                                       */import{d as ae,j as te,a as l,b as oe,o as p,c as _,g as d,m as c,u as q,I as C,J as F,h as m,e as v,N as le,K as x,p as se,t as g,i as N,E as B,F as ne,G as ce,_ as ue}from"./index-CQpPS6KF.js";/* empty css                                                                   */import"./commonButton-s4MRImLv.js";import"./commonStore-BKqabBYd.js";/* empty css                                                                     */const ie=u=>(ne("data-v-735bb735"),u=u(),ce(),u),re={class:"rubbishDemand-innerPopver"},pe={class:"rubbishDemand-innerPopver-optionsPanel"},de=["onClick"],me={style:{width:"100%"},class:"showArrSelectBox"},fe={class:"showArrSelectPanel"},he=ie(()=>v("div",{style:{"margin-bottom":"16px"}},g("选择显示字段"),-1)),ve=ae({__name:"selectCombinationElseValue",props:{data:{type:Object},changeFunc:{type:Function},defaultValueCheckMultiple:{type:Boolean,default:!1}},setup(u,{expose:I}){const L=te("$defultRequest"),P=l({}),O=l({modifiers:[{name:"flip",enabled:!0}]}),b=l(""),s=l([]),i=l(""),f=l(!1),y=l({}),n=l([]),e=u;l(""),l(null),l(!1);const T=l(!0),S=l(),G=a=>{e.data.componentsData.optionArr.splice(a,1),e.changeFunc()},V=async()=>{await L.request({url:F.dictionaryManagementApi.getDicTypeListReference,method:"get",params:{folderId:"",status:"ENABLE"}}).then(a=>{a.data.forEach(t=>{t.label=t.name,t.value=t.code}),e.data.componentsData.quoteResources=a.data,s.value=a.data})},A=async()=>{r(i.value)?(T.value=!1,await L.request({url:F.dictionaryManagementApi.getDataAboutSelectList+"/"+e.data.componentsData.quoteResourcesSelect,method:"get"}).then(a=>{e.data.componentsData.dictReference=a.data;let t=[];a.data.displayColumnList.forEach(h=>{a.data.templateFieldList.forEach(D=>{h==D.moduleCode&&t.push({label:D.moduleTitle,value:h})})}),e.data.componentsData.data="",e.data.componentsData.defaultValueCheck="",e.data.componentsData.optionArr=t,e.data.componentsData.displayColumnListTemp=[],e.changeFunc()})):M()},E=()=>{s.value=[],r(b.value)?e.data.componentsData.quoteResources.forEach(a=>{a.label.includes(b.value)&&s.value.push(a)}):s.value=e.data.componentsData.quoteResources},J=a=>!!["image","fileUpload","textArea","createTime","modifyTime","sampleGroup1","recordGroup1","inspectionGroup1","materialGroup1"].includes(a.value),U=a=>{e.data.componentsData.quoteResourcesSelect=a.value,i.value=a.label,R(),A()},R=()=>{b.value="",f.value==!0&&setTimeout(()=>{y.value.blur(),f.value=!1},200)},M=()=>{e.data.componentsData.quoteResourcesSelect=null,T.value=!0,e.data.componentsData.optionArr=[],e.changeFunc()},j=()=>{e.data.componentsData.data="",e.data.componentsData.defaultValueCheck="",e.data.componentsData.displayColumnList=[],e.data.displayColumnListTemp=[],n.value=[]},$=()=>{n.value=[],r(e.data.componentsData.optionArr)&&r(e.data.componentsData.displayColumnListTemp)&&e.data.componentsData.displayColumnListTemp.forEach(a=>{e.data.componentsData.displayColumnList.push(a.value),n.value.push(a)}),S.value.dialogController()},z=a=>{let t=[];n.value.forEach(h=>{t.push(h.value)}),e.data.componentsData.displayColumnListTemp=JSON.parse(JSON.stringify(n.value)),e.data.componentsData.displayColumnList=JSON.parse(JSON.stringify(t)),e.changeFunc(),S.value.dialogController()},K=a=>{n.value=[],e.data.componentsData.displayColumnListTemp.forEach(t=>{n.value.push(t)}),e.changeFunc(),a.value=!1},Q=()=>{f.value==!0?setTimeout(()=>{f.value=!1},100):(V(),setTimeout(()=>{f.value=!0,y.value.focus()},100))},H=a=>{r(s.value)&&r(a)&&s.value.forEach(t=>{a==t.value&&(i.value=t.label)})};return oe(async()=>{await V(),r(s.value)&&s.value.forEach(a=>{e.data.componentsData.quoteResourcesSelect==a.value&&(i.value=a.label)})}),I({changeQuName:H}),(a,t)=>{const h=m("el-select"),D=m("el-input"),W=m("el-popover"),w=m("el-form-item"),X=m("el-tag"),Y=m("el-checkbox"),Z=m("el-checkbox-group");return p(),_(C,null,[d(w,{label:"引用资源",prop:"quoteResources"},{default:c(()=>[d(W,{trigger:"click","popper-class":"rubbishDemand-popver",width:"295px",visible:f.value},{reference:c(()=>[d(h,{ref_key:"rubbishDemandSelect",ref:P,modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),onChange:A,onClick:Q,clearable:"",onClear:j,filterable:!1,"popper-options":O.value,"popper-class":"rubbishDemand",id:"rubbishDemandId",class:"deleteIcon"},null,8,["modelValue","popper-options"])]),default:c(()=>[v("div",re,[d(D,{ref_key:"rubbishSearchRef",ref:y,modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=o=>b.value=o),placeholder:"搜索关键字",onBlur:R,onFocus:E,"suffix-icon":q(le),onInput:E},null,8,["modelValue","suffix-icon"]),v("div",pe,[(p(!0),_(C,null,x(s.value,o=>(p(),_("div",{class:se([i.value==o.label?"rubbishDemand-innerPopver-options-active":"rubbishDemand-innerPopver-options"]),onClick:k=>U(o)},g(o.label),11,de))),256))])])]),_:1},8,["visible"])]),_:1}),d(w,{label:"设置显示",prop:"optionArr",class:"ex-font-color"},{default:c(()=>[v("div",{class:"hiddenClickDiv",onClick:$}),v("div",me,[(p(!0),_(C,null,x(u.data.componentsData.displayColumnListTemp,(o,k)=>(p(),N(X,{class:"inner-tag",key:k,closable:!1,onClose:be=>G(k)},{default:c(()=>[B(g(o.label),1)]),_:2},1032,["onClose"]))),128))])]),_:1}),d(q(ee),{ref_key:"commonDialog",ref:S,width:"500px",tip:!1,title:"设置显示",onConfirm:z,onCancel:K,"confirm-name":"确定"},{default:c(()=>[v("div",fe,[he,d(Z,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=o=>n.value=o),style:{height:"272px",overflow:"auto"}},{default:c(()=>[(p(!0),_(C,null,x(u.data.componentsData.optionArr,o=>(p(),N(Y,{label:o,disabled:J(o)},{default:c(()=>[B(g(o.label),1)]),_:2},1032,["label","disabled"]))),256))]),_:1},8,["modelValue"])])]),_:1},512)],64)}}}),Fe=ue(ve,[["__scopeId","data-v-735bb735"]]);export{Fe as default};
