import{d as m,j as f,o as _,i as g,m as s,S as c,J as h,h as i,e as n,t as y,g as S}from"./index-Clgzg2y2.js";const b=n("span",{style:{color:"#13161b"}},"上传文件",-1),x={class:"el-upload__tip"},q=m({__name:"commonUpload",props:{acceptSty:{type:String,default:()=>".doc,.docx,.pdf,.jpg"},limit:{type:Number,default:()=>9999}},emits:["getFile"],setup(o,{emit:d}){const p=d,r=f("$defultRequest"),u=async l=>{let t=l.file.name.split(".");if(!t.includes("doc")&&!t.includes("docx")&&!t.includes("pdf")&&!t.includes("jpg")){c.warning("请选择正确格式的文件");return}let a=new FormData;a.append("file",l.file),r.request({url:h.fileApi.upload,method:"post",data:a}).then(e=>{e.code==="200"||e.code===200?p("getFile",e.data):c.error("上传失败")}).catch(e=>{c.error("上传失败")})};return(l,t)=>{const a=i("el-button"),e=i("el-upload");return _(),g(e,{class:"upload-demo","http-request":u,"show-file-list":!1,accept:o.acceptSty,limit:o.limit},{tip:s(()=>[n("div",x,"支持扩展名:"+y(o.acceptSty),1)]),default:s(()=>[S(a,{icon:"Upload"},{default:s(()=>[b]),_:1})]),_:1},8,["accept","limit"])}}});export{q as default};
