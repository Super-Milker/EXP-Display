import{c as N,l as q}from"./common-cltEURJe.js";/* empty css                                                                            *//* empty css                                                                                  *//* empty css                                                                     *//* empty css                                                                         */import R from"./commonButton-DdoDcZXx.js";/* empty css                                                                   *//* empty css                                                                     *//* empty css                                                               */import"./mockApi-D89B71da.js";/* empty css                                                                                       */import{d as U,A as B,j as J,z as T,a as c,H as f,b as A,o as g,i as _,m as r,h as n,U as O,g as t,E as b,k as j,u as y,t as k,e as i,J as F,_ as L}from"./index-B6J1FA6L.js";import"./commonStore-DEO2cvzA.js";/* empty css                                                                     */const z=U({__name:"loginForm",setup(E){const{cookies:v}=B(),w=J("$md5"),u=T();let m=c(!1);const e=f({username:"",password:"",memory:!1}),p=c({}),h=f({username:[{required:!0,message:"用户名不能为空",tigger:"change"},{required:!0,message:"用户名不能为空",tigger:"blur"}],password:[{required:!0,message:"密码不能为空！",tigger:"change"},{required:!0,message:"密码不能为空！",tigger:"blur"}]}),x=async()=>{var o;let s=!1;return await((o=p.value)==null?void 0:o.validate(async a=>{a?s=!0:s=!1})),s},V=()=>{u.push("/register")},C=()=>{x().then(s=>{s==!0&&(m.value=!0,q.request({url:F.loginApi.getToken,method:"post",data:e}).then(o=>{e.memory===!0?(e.password=w(e.password),localStorage.setItem("sassuserData",JSON.stringify(e))):localStorage.removeItem("sassuserData"),sessionStorage.setItem("sassuserId",JSON.stringify(o.data.userId)),v.set("sassuserToken",o.data.userToken),u.push(o.data.pageIndex),m.value=!1}).catch(()=>{m.value=!1}))})};return A(()=>{if(N(localStorage.getItem("sassuserData"))){let s=JSON.parse(localStorage.getItem("sassuserData"));e.memory=s.memory,e.username=s.username,e.password=s.password}}),(s,o)=>{const a=n("el-form-item"),d=n("el-input"),I=n("el-checkbox"),S=n("el-form"),D=O("loading");return g(),_(S,{ref_key:"formRef",ref:p,class:"login-form","label-position":"top",model:e,rules:h},{default:r(()=>[t(a,{label:"",prop:""}),t(a,{label:"",prop:"username"},{default:r(()=>[t(d,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=l=>e.username=l),maxlength:"50",placeholder:"用户名",class:"login-input"},null,8,["modelValue"])]),_:1}),t(a,{label:"",prop:"password"},{default:r(()=>[t(d,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.password=l),placeholder:"登录密码",class:"login-input",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t(a,{label:"",style:{"margin-bottom":"-7px !important"}},{default:r(()=>[t(I,{modelValue:e.memory,"onUpdate:modelValue":o[2]||(o[2]=l=>e.memory=l)},{default:r(()=>[b("记住账号")]),_:1},8,["modelValue"])]),_:1}),t(a,{label:""},{default:r(()=>[j((g(),_(y(R),{type:"confirm",onCommonClick:C,class:"login-form-submit",style:{"margin-top":"25px"}},{default:r(()=>[b(k("登录"))]),_:1})),[[D,y(m)]])]),_:1}),t(a,{label:"",prop:""},{default:r(()=>[i("div",{class:"login-form-fotter"},[i("div",{class:"login-form-fotter-textGroup"},[i("span",{style:{color:"rgba(0, 82, 217, 1)",cursor:"pointer"},onClick:V},k("注册"))])])]),_:1})]),_:1},8,["model","rules"])}}}),te=L(z,[["__scopeId","data-v-29fd0846"]]);export{te as default};
