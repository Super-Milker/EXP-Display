import{d as y,a as l,w as i,b as V,o as u,i as p,m as r,R as k,h as c,f as w,g as N,r as _,p as b,F as C,G as O,e as R,_ as q}from"./index-8ixZQw2x.js";import{c as J}from"./common-BNMAzue3.js";import{l as x}from"./lowCodeStore-DzbG4axI.js";/* empty css                                                                       */const F=a=>(C("data-v-c05d8669"),a=a(),O(),a),B=F(()=>R("span",{style:{width:"20%",height:"20px",position:"absolute","z-index":"1"}},null,-1)),I=y({__name:"commonShowForm",props:{formData:{type:Object},formRules:{type:Object},parentData:{type:Object},selfName:{type:String},detail:{type:Boolean,default:!1}},setup(a,{expose:v}){const e=a,s=l(null);let n=l(!0);const d=l(0),m=l(!1),S=()=>{let t={templateValue:[]};return e.formRules!=""&&e.formRules!=null?t=e.formRules:t={templateValue:[]},e.parentData.isRequired==!0&&(t.hasOwnProperty("templateValue")||(t.templateValue=[]),t.templateValue.unshift({required:!0,message:"此项必填",trigger:"change"}),t.templateValue.unshift({required:!0,message:"此项必填",trigger:"blur"})),t},f=async()=>{var t;return await((t=s.value)==null?void 0:t.validate(o=>{o?n.value=!0:n.value=!1})),n.value};return v({submitCheck:f,form:s}),i(()=>x().commonTemplateSelectComponent,async t=>{t.id==e.parentData.id?m.value=!0:m.value=!1},{immediate:!0,deep:!0}),i(e.formData,async t=>{d.value>0&&(e.parentData.data=JSON.parse(JSON.stringify(t.templateValue)))},{immediate:!1,deep:!0}),i(()=>e.parentData,t=>{e.formData.templateValue=JSON.parse(JSON.stringify(t.data))}),V(()=>{J(e.parentData.data)&&(e.formData.templateValue=JSON.parse(JSON.stringify(e.parentData.data))),d.value+=1}),(t,o)=>{const h=c("el-tooltip"),D=c("el-form-item"),g=c("el-form");return u(),p(g,{ref_key:"form",ref:s,model:e.formData,rules:S(),"label-position":"top",class:"templateSet-form",allCheckFunc:f,onSubmit:o[0]||(o[0]=k(()=>{},["prevent"])),"hide-required-asterisk":!e.parentData.isRequired,"validate-on-rule-change":!1},{default:r(()=>[e.parentData.moduleTitle.length>10?(u(),p(h,{key:0,content:e.parentData.moduleTitle},{default:r(()=>[B]),_:1},8,["content"])):w("",!0),N(D,{class:b(["templateSet-form-item",m.value?"selectActive":""]),label:e.parentData.moduleTitle,prop:"templateValue"},{default:r(()=>[e.parentData.tooltipShow==!0?(u(),p(h,{key:0,content:e.parentData.data},{default:r(()=>[_(t.$slots,"default",{},void 0,!0)]),_:3},8,["content"])):_(t.$slots,"default",{key:1},void 0,!0)]),_:3},8,["label","class"])]),_:3},8,["model","rules","hide-required-asterisk"])}}}),$=q(I,[["__scopeId","data-v-c05d8669"]]);export{$ as default};
