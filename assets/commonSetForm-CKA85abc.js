/* empty css                                                                            *//* empty css                                                                                  *//* empty css                                                                     */import{d as F,j,a as i,L as B,b as P,n as $,o as E,c as M,g as l,m as r,u as _,I as z,J as b,h as p,E as g,r as L,e as W,t as Z,_ as G}from"./index-8ixZQw2x.js";/* empty css                                                                         */import H from"./commonButton-B_ZngR8F.js";/* empty css                                                                   */import K from"./commonDialog-DF1Tq1Ds.js";/* empty css                                                               */import{l as w}from"./lowCodeStore-DzbG4axI.js";import"./mockApi-BGY-Z4fJ.js";/* empty css                                                                                       */import{c as v,f as Q}from"./common-BNMAzue3.js";/* empty css                                                                      */import"./commonStore-ChYG-wrY.js";/* empty css                                                                     *//* empty css                                                                     */const X={style:{display:"flex","justify-content":"end",width:"100%"}},Y=F({__name:"commonSetForm",props:{formData:{type:Object},formRules:{type:Object}},emits:["reset"],setup(u,{expose:V,emit:q}){const D=j("$defultRequest"),e=u,C=i({}),h=i();i({});const y=i(""),f=w();B(w());const T=i({});i();const O=q,R=async()=>{var o;await((o=T.value)==null?void 0:o.resetFields()),O("reset",C.value.quoteResourcesSelect),d()},S=i([]),x=()=>{let o={moduleTitle:[],moduleCode:[]};return e.formRules!=""&&e.formRules!=null&&(o=e.formRules),o.hasOwnProperty("moduleCode")||(o.moduleCode=[]),o.moduleCode.unshift({required:!0,message:"请输入控件代号",trigger:"blur"}),o.moduleCode.unshift({required:!0,message:"请输入控件代号",trigger:"change"}),o.moduleCode.unshift({validator:async(t,m,a)=>{let n=[];for await(const c of f.commonTemplateSelectComponentArr)c.moduleCode+""==m&&n.push("check");n.length>1?a("请输入控件代号"):a()},trigger:"blur"}),o.moduleCode.unshift({validator:async(t,m,a)=>{let n=/^[0-9a-zA-Z_]{1,}$/;m.length>0&&m.match(n)==null?a("仅支持英文、数字、下划线“_”"):a()},trigger:"change"}),o.moduleCode.unshift({validator:async(t,m,a)=>{S.value.length>0?a("控件代号重复"):a()},trigger:"blur"}),o.hasOwnProperty("moduleTitle")||(o.moduleTitle=[]),o.moduleTitle.unshift({required:!0,message:"此项必填",trigger:"change"}),o.moduleTitle.unshift({required:!0,message:"此项必填",trigger:"blur"}),o.moduleTitle.push({validator:async(t,m,a)=>{m.length>20?a("最多可输入【20】字"):a()},trigger:"blur",required:!0}),o},I=async()=>{},d=async()=>{!v(e.formData.data)&&e.formData.data instanceof Array&&(e.formData.data=[]),!v(e.formData.data)&&typeof e.formData.data=="string"&&(e.formData.data=""),f.updateCommonTemplateSelectArrData(e.formData)},N=()=>{d(),e.formData.moduleCode&&D.request({url:b.templateApi.checkModuleCodeUseful,method:"get",params:{moduleCode:e.formData.moduleCode,id:e.formData.id,templateType:JSON.parse(sessionStorage.getItem("sasslowCodeData")).templateType,templateId:JSON.parse(sessionStorage.getItem("sasslowCodeData")).templateId},tip:!1}).then(async o=>{if(o.hasOwnProperty("data"))if(o.data===!1)y.value=o.msg,h.value.dialogController(),Q("border:0px");else{for await(const t of f.commonTemplateSelectComponentArr)t.moduleCode==e.formData.moduleCode&&t.id!==e.formData.id&&S.value.push(!0);await d()}}).catch(o=>{e.formData.moduleCode="",d()})},A=o=>{D.request({url:b.templateApi.codeUsefulResult,method:"post",data:{...e.formData,templateType:JSON.parse(sessionStorage.getItem("sasslowCodeData")).templateType,templateId:JSON.parse(sessionStorage.getItem("sasslowCodeData")).templateId}}).then(t=>{f.commonTemplateSelectComponent=t.data,f.updateCommonTemplateSelectArrData(f.commonTemplateSelectComponent),o.value=!1})},U=o=>{e.formData.moduleCode="",o.value=!1};return P(()=>{C.value=JSON.parse(JSON.stringify(e.formData)),$(()=>{I()})}),V({submitData:d}),(o,t)=>{const m=p("el-select"),a=p("el-form-item"),n=p("el-input"),c=p("el-radio"),k=p("el-radio-group"),J=p("el-form");return E(),M(z,null,[l(J,{ref_key:"myform",ref:T,model:e.formData,rules:x(),"label-position":"top",class:"templateSet-form"},{default:r(()=>[l(a,{label:"控件名称",prop:"moduleShowType"},{default:r(()=>[l(m,{modelValue:u.formData.moduleShowType,"onUpdate:modelValue":t[0]||(t[0]=s=>u.formData.moduleShowType=s),disabled:!0},null,8,["modelValue"])]),_:1}),l(a,{label:"显示名称",prop:"moduleTitle"},{default:r(()=>[l(n,{modelValue:e.formData.moduleTitle,"onUpdate:modelValue":t[1]||(t[1]=s=>e.formData.moduleTitle=s),placeholder:"请输入",onInput:d},null,8,["modelValue"])]),_:1}),l(a,{label:"控件代号",prop:"moduleCode"},{default:r(()=>[l(n,{modelValue:e.formData.moduleCode,"onUpdate:modelValue":t[2]||(t[2]=s=>e.formData.moduleCode=s),placeholder:"请输入",maxlength:100,onChange:N,disabled:u.formData.hasOwnProperty("codeDisable")?u.formData.codeDisable:!1},null,8,["modelValue","disabled"])]),_:1}),l(a,{label:"控件说明",prop:"moduleDesc"},{default:r(()=>[l(n,{type:"textarea",modelValue:e.formData.moduleDesc,"onUpdate:modelValue":t[3]||(t[3]=s=>e.formData.moduleDesc=s),placeholder:"请输入",maxlength:100,"show-word-limit":"",onChange:d},null,8,["modelValue"])]),_:1}),l(a,{label:"是否必填",prop:"isRequired"},{default:r(()=>[l(k,{modelValue:e.formData.isRequired,"onUpdate:modelValue":t[4]||(t[4]=s=>e.formData.isRequired=s),onChange:d,disabled:u.formData.hasOwnProperty("requiredDisable")?u.formData.requiredDisable:!1},{default:r(()=>[l(c,{label:!0},{default:r(()=>[g("是")]),_:1}),l(c,{label:!1},{default:r(()=>[g("否")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),L(o.$slots,"default",{},void 0,!0),l(a,null,{default:r(()=>[W("div",X,[l(_(H),{type:"normal",onCommonClick:R},{default:r(()=>[g("重置")]),_:1})])]),_:1})]),_:3},8,["model","rules"]),l(_(K),{ref_key:"commonDialog",ref:h,tip:!0,title:"提示",onConfirm:A,onCancel:U,"confirm-name":"确定"},{tip:r(()=>[g(Z(y.value),1)]),_:1},512)],64)}}}),Ce=G(Y,[["__scopeId","data-v-19569aeb"]]);export{Ce as default};
